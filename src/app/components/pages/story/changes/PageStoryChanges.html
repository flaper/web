<h2 class="text-xs-center">История изменений</h2>


<page-navigator [baseURL]="['/p','storyChanges',storyId]" [currentPage]="currentPage" [pageCount]="pages"></page-navigator>

<div class="alert alert-info" *ngIf="history.length === 0">
  В запись изменения не вносились.
</div>
<div class="history-list" *ngIf="history.length > 0">
  <div class="history-item" *ngFor="let record of history">
    <h6>
      {{record.current.created | date:"dd.MM.yyyy HH:mm"}}
    </h6>
    <a [routerLink]="['/u',record.user.id]">
      {{record.user.displayName}}
    </a>
    <ul class='changes-list'>
      <li class='change-record' *ngFor="let change of getFields(record)">
        <label>{{t(change.key)}}</label>
        <div class="changed-field">
          <div class="change-value" [innerHTML]="change.oldValue">
          </div>
          <div class="change-value" [innerHTML]="change.currentValue">
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>
